(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"KHd+":function(t,s,e){"use strict";function a(t,s,e,a,i,o,n,r){var l,c="function"==typeof t?t.options:t;if(s&&(c.render=s,c.staticRenderFns=e,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,s){return l.call(s),d(t,s)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}e.d(s,"a",(function(){return a}))},"sZ/G":function(t,s,e){"use strict";e.r(s);var a={data:function(){return{start_date:"",end_date:"",user:"",module:"",records:[],columns:["status","date","ip","module","users","id"]}},methods:{readRecords:function(){var t=this;t.loading=!0,axios.post("/app/audit-records",{start_date:t.start_date,end_date:t.end_date,user:t.user,module:t.module}).then((function(s){s.data.result&&void 0!==s.data.records&&(t.records=s.data.records),t.loading=!1})).catch((function(s){console.error(s),t.loading=!1}))},details:function(t){var s=this;s.loading=!0,axios.post("/app/audit-details",{id:t}).then((function(t){if(t.data.result){var e=t.data.audit,a=e.event,i="",o="",n="N/A",r="N/A";"created"===a?(i="NUEVO",o="success"):"deleted"===a?(i="ELIMINADO",o="danger"):"restored"===a?(i="RESTAURADO",o="info"):"updated"===a&&(i="ACTUALIZADO",o="warning"),e.old_values&&(n="",Object.keys(e.old_values).forEach((function(t){n+="<b>".concat(t,":</b> ").concat(e.old_values[t],"<br>")}))),e.new_values&&(r="",Object.keys(e.new_values).forEach((function(t){r+="<b>".concat(t,":</b> ").concat(e.new_values[t],"<br>")}))),bootbox.dialog({title:"Registro",message:'<div class="row text-justify">\n                                        <div class="col-12">\n                                            <p>\n                                                <span class="badge badge-'.concat(o,' mr-1">').concat(i,'</span>\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <div class="row">\n                                        <div class="col-md-6 text-left">\n                                            <h5>Datos anteriores</h5>\n                                            <div>').concat(n,'</div>\n                                        </div>\n                                        <div class="col-md-6 text-left">\n                                            <h5>Datos nuevos</h5>\n                                            <div>').concat(r,"</div>\n                                        </div>\n                                    </div>"),size:"large",buttons:{ok:{label:"Cerrar",className:"btn-primary",callback:function(){}}}})}s.loading=!1})).catch((function(t){console.error(t),s.loading=!1}))}},created:function(){this.table_options.headings={status:"",date:"Fecha - Hora",ip:"IP",module:"Módulo",users:"Usuario",id:"Acción"},this.table_options.sortable=["date","ip","module","users"],this.table_options.filterable=["date","ip","module","users"],this.table_options.columnsClasses={status:"col-md-1",date:"col-md-2",ip:"col-md-1",module:"col-md-5",users:"col-md-2",id:"col-md-1"}},mounted:function(){this.readRecords()}},i=e("KHd+"),o=Object(i.a)(a,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[t._m(1),t._v(" "),e("div",{staticClass:"form-group col-md-2"},[e("div",{staticClass:"input-group input-sm"},[t._m(2),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.start_date,expression:"start_date"}],staticClass:"form-control",attrs:{type:"date","data-toggle":"tooltip",title:"Desde la fecha",placeholder:"Fecha"},domProps:{value:t.start_date},on:{input:function(s){s.target.composing||(t.start_date=s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group col-md-2"},[e("div",{staticClass:"input-group input-sm"},[t._m(3),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.end_date,expression:"end_date"}],staticClass:"form-control",attrs:{type:"date","data-toggle":"tooltip",title:"Hasta la fecha",placeholder:"Fecha"},domProps:{value:t.end_date},on:{input:function(s){s.target.composing||(t.end_date=s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group col-md-2"},[e("div",{staticClass:"input-group input-sm"},[t._m(4),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"}],staticClass:"form-control",attrs:{type:"text","data-toggle":"tooltip",title:"Consulta por usuario",placeholder:"Módulo"},domProps:{value:t.user},on:{input:function(s){s.target.composing||(t.user=s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group col-md-2"},[e("div",{staticClass:"input-group input-sm"},[t._m(5),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.module,expression:"module"}],staticClass:"form-control",attrs:{type:"text","data-toggle":"tooltip",title:"Consulta por módulo de la aplicación",placeholder:"Módulo"},domProps:{value:t.module},on:{input:function(s){s.target.composing||(t.module=s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group col-md-2"},[e("button",{staticClass:"btn btn-info btn-icon btn-xs px-3",attrs:{type:"button","data-toggle":"tooltip",title:"Buscar registros del sistema"},on:{click:t.readRecords}},[e("i",{staticClass:"fa fa-search"})])])]),t._v(" "),t._m(6),t._v(" "),e("hr"),t._v(" "),t._m(7),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("v-client-table",{attrs:{columns:t.columns,data:t.records,options:t.table_options},scopedSlots:t._u([{key:"status",fn:function(s){return e("div",{staticClass:"text-center",domProps:{innerHTML:t._s(s.row.status)}})}},{key:"date",fn:function(s){return e("div",{staticClass:"text-center",domProps:{innerHTML:t._s(s.row.date)}},[t._v("\n                                "+t._s(s.row.date)+"\n                            ")])}},{key:"ip",fn:function(s){return e("div",{staticClass:"text-center",domProps:{innerHTML:t._s(s.row.ip)}},[t._v("\n                                "+t._s(s.row.ip)+"\n                            ")])}},{key:"users",fn:function(s){return e("div",{domProps:{innerHTML:t._s(s.row.users)}})}},{key:"id",fn:function(s){return e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-info btn-xs btn-icon btn-action",attrs:{title:"Ver detalles del registro","data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.details(s.row.id)}}},[e("i",{staticClass:"fa fa-eye"})])])}}])})],1)])])])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"card-header"},[s("h6",{staticClass:"card-title"},[this._v("Auditoría de registros")]),this._v(" "),s("div",{staticClass:"card-btns"},[s("a",{staticClass:"card-minimize btn btn-card-action btn-round",attrs:{href:"javascript:void(0)",title:"Minimizar","data-toggle":"tooltip"}},[s("i",{staticClass:"now-ui-icons arrows-1_minimal-up"})])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"col-md-2"},[s("b",[this._v("Filtros")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"now-ui-icons ui-1_calendar-60"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"now-ui-icons ui-1_calendar-60"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"now-ui-icons users_circle-08"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"now-ui-icons design_app"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("span",{staticClass:"form-text text-muted"},[this._v("\n                            A continuación se muestran los 20 registros más recientes.\n                            Si desea obtener mayor información, debe indicar los parámetros de búsqueda.\n                        ")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row mg-bottom-20"},[e("div",{staticClass:"col-12 panel-legend"},[e("i",{staticClass:"ion-android-checkbox-blank text-success",attrs:{title:"Registros nuevos","data-toggle":"tooltip"}}),t._v(" "),e("span",[t._v("nuevos")])]),t._v(" "),e("div",{staticClass:"col-12 panel-legend"},[e("i",{staticClass:"ion-android-checkbox-blank text-warning",attrs:{title:"Registros actualizados","data-toggle":"tooltip"}}),t._v(" "),e("span",[t._v("actualizados")])]),t._v(" "),e("div",{staticClass:"col-12 panel-legend"},[e("i",{staticClass:"ion-android-checkbox-blank text-info",attrs:{title:"Registros reestablecidos","data-toggle":"tooltip"}}),t._v(" "),e("span",[t._v("restaurados después de eliminación")])]),t._v(" "),e("div",{staticClass:"col-12 panel-legend"},[e("i",{staticClass:"ion-android-checkbox-blank text-danger",attrs:{title:"Registros eliminados","data-toggle":"tooltip"}}),t._v(" "),e("span",[t._v("eliminados")])])])}],!1,null,null,null);s.default=o.exports}}]);