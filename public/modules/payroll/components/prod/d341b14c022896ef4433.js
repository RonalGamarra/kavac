(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"KHd+":function(t,e,o){"use strict";function i(t,e,o,i,a,r,s,n){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=o,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=d):a&&(d=n?function(){a.call(this,this.$root.$options.shadowRoot)}:a),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(t,e){return d.call(e),l(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,d):[d]}return{exports:t,options:c}}o.d(e,"a",function(){return i})},To9x:function(t,e,o){"use strict";o.r(e);var i={data:function(){return{record:{id:"",code:"",name:"",payment_periodicity:"",periods_number:"",correlative:!1,start_date:"",payment_relationship:"",budget_account_id:"",accounting_account_id:"",payroll_concepts:[],associated_records:[],payroll_payment_periods:[]},view_periods:!1,errors:[],records:[],columns:["code","name","payment_periodicity","id"],periods_columns:["number","start_date","start_day","end_date","end_day","payment_status"],payment_periodicities:[{id:"",text:"Seleccione..."},{id:"daily",text:"Diario"},{id:"weekly",text:"Semanal"},{id:"biweekly",text:"Quincenal"},{id:"monthly",text:"Mensual"},{id:"bimonthly",text:"Bimensual"},{id:"three-monthly",text:"Trimestral"},{id:"four-monthly",text:"Cuatrimestral"},{id:"biannual",text:"Semestral"},{id:"annual",text:"Anual"},{id:"not_apply",text:"No Aplica"}],payment_relationships:[{id:"",text:"Seleccione..."},{id:"payroll",text:"Nómina"},{id:"comprehensive_wages",text:"Salarios Integrales"},{id:"utilities",text:"Utilidades"},{id:"vacations",text:"Vacaciones"},{id:"social_benefits_guarantees",text:"Garantías de prestaciones sociales"},{id:"social_benefit_interests",text:"Intereses de prestaciones sociales"},{id:"liquidations",text:"Liquidaciones"},{id:"ticket_basket",text:"Cesta ticket"},{id:"kindergarten",text:"Guardería"},{id:"special_payroll",text:"Nómina especial"},{id:"others",text:"Otros"}],days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],payroll_concepts:[],budget_accounts:[],accounting_accounts:[],associated_records:[]}},created:function(){this.table_options.headings={code:"Código",name:"Nombre",payment_periodicity:"Periodicidad",id:"Acción",number:"N°",start_date:"Inicio de Período",start_day:"Día Inicial",end_date:"Fin de Período",end_day:"Día Final",payment_status:"Status de Pago"},this.table_options.sortable=["code","name","payment_periodicity","id"],this.table_options.filterable=["code","name","payment_periodicity","id"],this.table_options.columnsClasses={code:"col-xs-4",name:"col-xs-4",payment_periodicity:"col-xs-2",id:"col-xs-2"}},mounted:function(){var t=this;$("#add_payroll_payment_type").on("show.bs.modal",function(){t.reset(),t.getPayrollConcepts(),t.getAccountingAccounts(),t.getBudgetAccounts(),t.getOptions("payroll/get-associated-records")})},watch:{record:{deep:!0,handler:function(){if(""!=this.record.payment_periodicity&&""==this.record.periods_number){var t=0;t="daily"==this.record.payment_periodicity?365:"weekly"==this.record.payment_periodicity?48:"biweekly"==this.record.payment_periodicity?24:"monthly"==this.record.payment_periodicity?12:"bimonthly"==this.record.payment_periodicity?6:"three-monthly"==this.record.payment_periodicity?4:"four-monthly"==this.record.payment_periodicity?3:"biannual"==this.record.payment_periodicity?2:"annual"==this.record.payment_periodicity?1:0,this.record.periods_number=t}if(this.record.periods_number>0&&this.record.payroll_payment_periods&&0==this.record.payroll_payment_periods.length&&""!=this.record.start_date)for(var e="",o="",i="",a="",r=this.record.start_date,s="",n="",d=0;d<=this.record.periods_number-1;d++)"daily"==this.record.payment_periodicity?(s=moment(String(r)).add(d,"days").format("DD/MM/YYYY"),n=moment(String(r)).add(d+1,"days").format("DD/MM/YYYY")):"weekly"==this.record.payment_periodicity?(s=moment(String(r)).add(8*d,"days").format("DD/MM/YYYY"),n=moment(String(r)).add(8*(d+1),"days").format("DD/MM/YYYY")):"biweekly"==this.record.payment_periodicity?(s=moment(String(r)).add(15*d,"days").format("DD/MM/YYYY"),n=moment(String(r)).add(15*(d+1),"days").format("DD/MM/YYYY")):"monthly"==this.record.payment_periodicity?(s=moment(String(r)).add(1*d,"months").format("DD/MM/YYYY"),n=moment(String(r)).add(1*(d+1),"months").format("DD/MM/YYYY")):"bimonthly"==this.record.payment_periodicity?(s=moment(String(r)).add(2*d,"months").format("DD/MM/YYYY"),n=moment(String(r)).add(2*(d+1),"months").format("DD/MM/YYYY")):"three-monthly"==this.record.payment_periodicity?(s=moment(String(r)).add(3*d,"months").format("DD/MM/YYYY"),n=moment(String(r)).add(3*(d+1),"months").format("DD/MM/YYYY")):"four-monthly"==this.record.payment_periodicity?(s=moment(String(r)).add(4*d,"months").format("DD/MM/YYYY"),n=moment(String(r)).add(4*(d+1),"months").format("DD/MM/YYYY")):"biannual"==this.record.payment_periodicity?(s=moment(String(r)).add(6*d,"months").format("DD/MM/YYYY"),n=moment(String(r)).add(6*(d+1),"months").format("DD/MM/YYYY")):"annual"==this.record.payment_periodicity&&(s=moment(String(r)).add(1*d,"years").format("DD/MM/YYYY"),n=moment(String(r)).add(1*(d+1),"years").format("DD/MM/YYYY")),e=s.split("/"),o=n.split("/"),i=new Date(e[2]+"/"+e[1]+"/"+e[0]).getDay(),a=new Date(o[2]+"/"+o[1]+"/"+o[0]).getDay(),this.record.payroll_payment_periods.push({number:d+1,start_date:s,start_day:this.days[i],end_date:n,end_day:this.days[a],payment_status:"pending"})}}},methods:{reset:function(){this.record={id:"",code:"",name:"",payment_periodicity:"",periods_number:"",correlative:!1,start_date:"",payment_relationship:"",budget_account_id:"",accounting_account_id:"",payroll_concepts:[],associated_records:[],payroll_payment_periods:[]},this.view_periods=!1},getAccountingAccounts:function(){var t=this;t.accounting_accounts=[],axios.get("/accounting/accounts").then(function(e){e.data.records.length>0&&(t.accounting_accounts.push({id:"",text:"Seleccione..."}),$.each(e.data.records,function(){t.accounting_accounts.push({id:this.id,text:"".concat(this.code," - ").concat(this.denomination)})}))}).catch(function(e){t.logs("PayrollPaymentTypesComponent",258,e,"getAccountingAccounts")})},getBudgetAccounts:function(){var t=this;t.budget_accounts=[],axios.get("/budget/accounts/vue-list").then(function(e){e.data.records.length>0&&(t.budget_accounts.push({id:"",text:"Seleccione..."}),$.each(e.data.records,function(){t.budget_accounts.push({id:this.id,text:"".concat(this.code," - ").concat(this.denomination)})}))}).catch(function(e){t.logs("PayrollPaymentTypesComponent",258,e,"getBudgetAccounts")})},getOptions:function(t){var e=this;e.associated_records=[],axios.get("/"+t).then(function(t){t.data.length>0&&$.each(t.data,function(t,o){void 0!==o.children?$.each(o.children,function(t,o){e.associated_records.push(o)}):e.associated_records.push(o)})})}}},a=o("KHd+"),r=Object(a.a)(i,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{attrs:{id:"payrollPaymentTypesFormComponent"}},[o("a",{staticClass:"btn-simplex btn-simplex-md btn-simplex-primary",attrs:{href:"",title:"Registros de tipos de pago","data-toggle":"tooltip"},on:{click:function(e){return t.addRecord("add_payroll_payment_type","payment-types",e)}}},[o("i",{staticClass:"icofont icofont icofont-law-document ico-3x"}),t._v(" "),t._m(0)]),t._v(" "),o("div",{staticClass:"modal fade text-left",attrs:{tabindex:"-1",role:"dialog",id:"add_payroll_payment_type"}},[o("div",{staticClass:"modal-dialog vue-crud",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),o("div",{staticClass:"modal-body"},[t.errors.length>0?o("div",{staticClass:"alert alert-danger"},[o("div",{staticClass:"container"},[t._m(2),t._v(" "),o("strong",[t._v("Cuidado!")]),t._v(" Debe verificar los siguientes errores antes de continuar:\n                            "),o("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){e.preventDefault(),t.errors=[]}}},[t._m(3)]),t._v(" "),o("ul",t._l(t.errors,function(e){return o("li",[t._v(t._s(e))])}),0)])]):t._e(),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group is-required"},[o("label",{attrs:{for:"code"}},[t._v("Código:")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.record.code,expression:"record.code"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"code",placeholder:"Código","data-toggle":"tooltip",title:"Indique el códigoe del tipo de pago (requerido)"},domProps:{value:t.record.code},on:{input:function(e){e.target.composing||t.$set(t.record,"code",e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.record.id,expression:"record.id"}],attrs:{type:"hidden",name:"id",id:"id"},domProps:{value:t.record.id},on:{input:function(e){e.target.composing||t.$set(t.record,"id",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group is-required"},[o("label",{attrs:{for:"name"}},[t._v("Nombre:")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.record.name,expression:"record.name"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"name",placeholder:"Nombre","data-toggle":"tooltip",title:"Indique el nombre del tipo de pago (requerido)"},domProps:{value:t.record.name},on:{input:function(e){e.target.composing||t.$set(t.record,"name",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group is-required"},[o("label",[t._v("Cuenta contable")]),t._v(" "),o("select2",{attrs:{options:t.accounting_accounts},model:{value:t.record.accounting_account_id,callback:function(e){t.$set(t.record,"accounting_account_id",e)},expression:"record.accounting_account_id"}})],1)]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group is-required"},[o("label",[t._v("Cuenta presupuestario")]),t._v(" "),o("select2",{attrs:{options:t.budget_accounts},model:{value:t.record.budget_account_id,callback:function(e){t.$set(t.record,"budget_account_id",e)},expression:"record.budget_account_id"}})],1)]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group is-required"},[o("label",[t._v("Periodicidad de pago")]),t._v(" "),o("select2",{attrs:{options:t.payment_periodicities},on:{input:function(e){t.record.periods_number="",t.record.payroll_payment_periods=[]}},model:{value:t.record.payment_periodicity,callback:function(e){t.$set(t.record,"payment_periodicity",e)},expression:"record.payment_periodicity"}})],1)]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"periods"}},[t._v("Períodos:")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.record.periods_number,expression:"record.periods_number"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"periods",placeholder:"0",readonly:"","data-toggle":"tooltip",title:"Número de períodos del tipo de pago"},domProps:{value:t.record.periods_number},on:{input:function(e){e.target.composing||t.$set(t.record,"periods_number",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:" form-group"},[o("label",[t._v("¿Correlativo al expediente del trabajador?")]),t._v(" "),o("div",{staticClass:"col-12"},[o("p-check",{staticClass:"pretty p-switch p-fill p-bigger",attrs:{color:"success","off-color":"text-gray",toggle:"","data-toggle":"tooltip",title:"¿El tipo de pago es correlativo al expediente del trabajador?"},model:{value:t.record.correlative,callback:function(e){t.$set(t.record,"correlative",e)},expression:"record.correlative"}},[o("label",{attrs:{slot:"off-label"},slot:"off-label"})])],1)])]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group is-required"},[o("label",[t._v("Fecha de inicio del primer período:")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.record.start_date,expression:"record.start_date"}],staticClass:"form-control input-sm",attrs:{type:"date",id:"start_date",placeholder:"Fecha de inicio","data-toggle":"tooltip",title:"Indique la fecha de inicio del primer período"},domProps:{value:t.record.start_date},on:{input:function(e){e.target.composing||t.$set(t.record,"start_date",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group is-required"},[o("label",[t._v("Relación de pago")]),t._v(" "),o("select2",{attrs:{options:t.payment_relationships},model:{value:t.record.payment_relationship,callback:function(e){t.$set(t.record,"payment_relationship",e)},expression:"record.payment_relationship"}})],1)]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.record.correlative,expression:"record.correlative"}],staticClass:"col-md-6"},[o("div",{staticClass:"form-group is-required"},[o("label",[t._v("Campos del expediente del trabajador:")]),t._v(" "),o("v-multiselect",{attrs:{options:t.associated_records,track_by:"text",hide_selected:!1},model:{value:t.record.associated_records,callback:function(e){t.$set(t.record,"associated_records",e)},expression:"record.associated_records"}})],1)]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group is-required"},[o("label",[t._v("Conceptos:")]),t._v(" "),o("v-multiselect",{attrs:{options:t.payroll_concepts,track_by:"text",hide_selected:!1},model:{value:t.record.payroll_concepts,callback:function(e){t.$set(t.record,"payroll_concepts",e)},expression:"record.payroll_concepts"}})],1)])]),t._v(" "),o("div",{staticClass:"row"},[1==t.view_periods?o("div",{staticClass:"col-12 text-right"},[o("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",title:"Ocultar períodos de nómina","data-toggle":"tooltip"},on:{click:function(e){t.view_periods=!1}}},[t._v("\n                                Ocultar períodos\n                            ")])]):t.record.payment_periodicity&&t.record.start_date?o("div",{staticClass:"col-12 text-right"},[o("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",title:"Ver períodos de nómina","data-toggle":"tooltip"},on:{click:function(e){t.view_periods=!0}}},[t._v("\n                                Ver períodos\n                            ")])]):t._e(),t._v(" "),t.view_periods?o("div",{staticClass:"col-12 modal-table"},[o("v-client-table",{attrs:{columns:t.periods_columns,data:t.record.payroll_payment_periods,options:t.table_options},scopedSlots:t._u([{key:"payment_status",fn:function(e){return o("div",{staticClass:"text-center"},[o("span",[t._v("\n                                        "+t._s("pending"==e.row.payment_status?"Pendiente":"Generado")+"\n                                    ")])])}}],null,!1,2576442588)})],1):t._e()])]),t._v(" "),o("div",{staticClass:"modal-footer"},[o("div",{staticClass:"form-group"},[o("modal-form-buttons",{attrs:{saveRoute:"payroll/payment-types"}})],1)]),t._v(" "),o("div",{staticClass:"modal-body modal-table"},[o("v-client-table",{attrs:{columns:t.columns,data:t.records,options:t.table_options},scopedSlots:t._u([{key:"id",fn:function(e){return o("div",{staticClass:"text-center"},[o("button",{staticClass:"btn btn-warning btn-xs btn-icon btn-action",attrs:{title:"Modificar registro","data-toggle":"tooltip",type:"button"},on:{click:function(o){return t.initUpdate(e.row.id,o)}}},[o("i",{staticClass:"fa fa-edit"})]),t._v(" "),o("button",{staticClass:"btn btn-danger btn-xs btn-icon btn-action",attrs:{title:"Eliminar registro","data-toggle":"tooltip",type:"button"},on:{click:function(o){return t.deleteRecord(e.index,"payment-types")}}},[o("i",{staticClass:"fa fa-trash-o"})])])}}])})],1)])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("Tipos de"),e("br"),this._v("Pago")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),e("h6",[e("i",{staticClass:"icofont icofont-law-document ico-3x"}),this._v("\n                        Tipo de Pago de Nómina\n                    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-icon"},[e("i",{staticClass:"now-ui-icons objects_support-17"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"now-ui-icons ui-1_simple-remove"})])}],!1,null,null,null);e.default=r.exports}}]);