(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{FSMl:function(t,e,r){"use strict";r.r(e);var s={props:["id"],data:function(){return{records:[],column_requirements:["code","description","fiscal_year.year","contrating_department.name","user_department.name","purchase_supplier_type.name"],table_option_requirements:{pagination:{edge:!0},highlightMatches:!0,texts:{filter:"Buscar:",filterBy:"Buscar por {column}",count:" ",first:"PRIMERO",last:"ÚLTIMO",limit:"Registros",noResults:"No existen registros"},sortIcon:{is:"fa-sort cursor-pointer",base:"fa",up:"fa-sort-up cursor-pointer",down:"fa-sort-down cursor-pointer"}},sub_total:0,tax:0,total:0,record_items:[]}},created:function(){this.table_option_requirements.headings={code:"Código",description:"Descripción","fiscal_year.year":"Año fiscal","contrating_department.name":"Departamento contatante","user_department.name":"Departamento Usuario","purchase_supplier_type.name":"Tipo de Proveedor"},this.table_option_requirements.columnsClasses={code:"col-xs-1",description:"col-xs-4","fiscal_year.year":"col-xs-1 text-center","contrating_department.name":"col-xs-2","user_department.name":"col-xs-2","purchase_supplier_type.name":"col-xs-2"}},methods:{reset:function(){},addDecimals:function(t){return parseFloat(t).toFixed(this.currency_decimal_places)},CalculateQtyPrice:function(t){return t?t.toFixed(this.currency?this.currency.decimal_places:""):0},CalculateTot:function(){this.sub_total=0,this.tax=0;for(var t=this.record_items.length-1;t>=0;t--){var e=this.record_items[t];e.qty_price=e.quantity*e.unit_price,this.sub_total+=e.qty_price}var r=1;this.records.tax&&this.records.tax.histories&&(r=this.records.tax.histories[0].percentage),this.tax=this.sub_total*(parseFloat(r)/100),this.total=this.sub_total+this.tax},cualculateLimitDecimal:function(){var t="0.";if(this.currency)for(var e=0;e<this.currency.decimal_places-1;e++)t+="0";return t+="1"}},computed:{record_tax:function(){if(this.records.tax&&this.records.tax.histories)return this.records.tax?this.records.tax.histories[0]:null},currency_symbol:function(){return this.records.currency?this.records.currency.symbol:""},currency_decimal_places:function(){if(this.records.currency)return this.records.currency.decimal_places},currency:function(){return this.records.currency?this.records.currency:null},currency_id:function(){return this.records.currency?this.records.currency.id:null},contracting_department:function(){if(this.records.purchase_requirements.contrating_department)return this.records.purchase_requirements.contrating_department.name},user_department:function(){if(this.records.purchase_requirements.user_department)return this.records.purchase_requirements.user_department.name},purchase_supplier_type:function(){if(this.records.purchase_requirements.purchase_supplier_type)return this.records.purchase_requirements.purchase_supplier_type.name},fiscal_year:function(){if(this.records.purchase_requirements.fiscal_year)return this.records.purchase_requirements.fiscal_year.year},description:function(){if(this.records.purchase_requirements.description)return this.records.purchase_requirements.description},purchase_requirement:function(){if(this.records.purchase_requirement){var t=[];return t.push(this.records.purchase_requirement),t}return[]},purchase_requirement_items:function(){var t=[];if(this.records.relatable)for(var e=0;e<this.records.relatable.length;e++)if(this.records.relatable[e].purchase_requirement_item){var r=this.records.relatable[e].purchase_requirement_item;r.requirement_code=this.records.relatable[e].purchase_requirement_item.purchase_requirement.code,r.qty_price=this.records.relatable[e].purchase_requirement_item.quantity*this.records.relatable[e].unit_price,r.unit_price=this.records.relatable[e].unit_price,t.push(this.records.relatable[e].purchase_requirement_item)}return this.record_items=t,this.CalculateTot(),t}}},i=r("KHd+"),a=Object(i.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("button",{staticClass:"btn btn-info btn-xs btn-icon btn-action",attrs:{title:"Visualizar requerimiento","data-toggle":"tooltip"},on:{click:function(e){return t.addRecord("show_base_budget_"+t.id,t.route_show,e)}}},[r("i",{staticClass:"fa fa-eye"})]),t._v(" "),r("div",{staticClass:"modal fade text-left",attrs:{tabindex:"-1",role:"dialog",id:"show_base_budget_"+t.id}},[r("div",{staticClass:"modal-dialog vue-crud",attrs:{role:"document"}},[r("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),r("div",{staticClass:"modal-body"},[r("h6",[t._v("INFORMACIÓN DE LOS REQUERIMIENTOS")]),t._v(" "),r("hr"),t._v(" "),r("v-client-table",{attrs:{columns:t.column_requirements,data:t.purchase_requirement,options:t.table_option_requirements}})],1),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"modal-body"},[r("div",{staticClass:"row col-12"},[r("table",{staticClass:"table table-striped table-hover",staticStyle:{"margin-left":"2rem"}},[t._m(1),t._v(" "),r("tbody",[t._l(t.purchase_requirement_items,function(e){return r("tr",{staticClass:"row"},[r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[t._v("\n                                        "+t._s(e.requirement_code)+"\n                                    ")]),t._v(" "),r("td",{staticClass:"col-3",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")]),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[t._v("\n                                        "+t._s(e.measurement_unit.acronym)+"\n                                    ")]),t._v(" "),r("td",{staticClass:"col-1",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[t._v("\n                                        "+t._s(e.quantity)+"\n                                    ")]),t._v(" "),r("td",{staticClass:"col-2 text-right",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[t._v("\n                                        "+t._s(t.addDecimals(e.unit_price))+"\n                                    ")]),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[r("h6",{attrs:{align:"right"}},[t._v(t._s(t.CalculateQtyPrice(e.qty_price)))])])])}),t._v(" "),r("tr",{staticClass:"row"},[r("td",{staticClass:"col-8",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}}),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[r("h6",{attrs:{align:"right"}},[t._v("SUB TOTAL "+t._s(t.currency_symbol))])]),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[r("h6",{attrs:{align:"right"}},[t._v(t._s(t.sub_total.toFixed(t.currency?t.currency.decimal_places:"")))])])]),t._v(" "),r("tr",{staticClass:"row"},[r("td",{staticClass:"col-8",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}}),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[r("h6",{attrs:{align:"right"}},[t._v(t._s(t.record_tax?t.record_tax.percentage:"")+" % IVA "+t._s(t.currency_symbol))])]),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[r("h6",{attrs:{align:"right"}},[t._v(t._s(t.tax.toFixed(t.currency?t.currency.decimal_places:"")))])])]),t._v(" "),r("tr",{staticClass:"row"},[r("td",{staticClass:"col-8",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}}),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[r("h6",{attrs:{align:"right"}},[t._v("TOTAL "+t._s(t.currency_symbol))])]),t._v(" "),r("td",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6"},attrs:{tabindex:"0"}},[r("h6",{attrs:{align:"right"}},[t._v(t._s(t.total.toFixed(t.currency?t.currency.decimal_places:"")))])])])],2)])])])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"reset","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),e("h6",[e("i",{staticClass:"fa fa-list inline-block"}),this._v("\n                        presupuesto base\n                    ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",{staticClass:"row"},[r("th",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6",position:"relative"},attrs:{tabindex:"0"}},[t._v("Código de requerimiento")]),t._v(" "),r("th",{staticClass:"col-3",staticStyle:{border:"1px solid #dee2e6",position:"relative"},attrs:{tabindex:"0"}},[t._v("Nombre")]),t._v(" "),r("th",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6",position:"relative"},attrs:{tabindex:"0"}},[t._v("Unidad de medida")]),t._v(" "),r("th",{staticClass:"col-1",staticStyle:{border:"1px solid #dee2e6",position:"relative"},attrs:{tabindex:"0"}},[t._v("Cantidad")]),t._v(" "),r("th",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6",position:"relative"},attrs:{tabindex:"0"}},[t._v("Precio Unitario sin IVA")]),t._v(" "),r("th",{staticClass:"col-2",staticStyle:{border:"1px solid #dee2e6",position:"relative"},attrs:{tabindex:"0"}},[t._v("cantidad * Precio unitario")])])])}],!1,null,null,null);e.default=a.exports},"KHd+":function(t,e,r){"use strict";function s(t,e,r,s,i,a,c,n){var o,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),s&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),c?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},l._ssrRegister=o):i&&(o=n?function(){i.call(this,this.$root.$options.shadowRoot)}:i),o)if(l.functional){l._injectStyles=o;var d=l.render;l.render=function(t,e){return o.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,o):[o]}return{exports:t,options:l}}r.d(e,"a",function(){return s})}}]);