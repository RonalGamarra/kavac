(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"KHd+":function(t,s,e){"use strict";function a(t,s,e,a,o,i,r,n){var c,l="function"==typeof t?t.options:t;if(s&&(l.render=s,l.staticRenderFns=e,l._compiled=!0),a&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):o&&(c=n?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,s){return c.call(s),d(t,s)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}e.d(s,"a",function(){return a})},wuro:function(t,s,e){"use strict";e.r(s);var a={props:["id"],data:function(){return{records:[],record:{id:"",name:"",description:"",require_documents:!1,list_documents:[]},listSelectDocuments:[],files:{}}},created:function(){},mounted:function(){this.records.purchase_process&&(this.record=this.records.purchase_process,this.getListDocuments())},methods:{reset:function(){this.getListDocuments()},getListDocuments:function(){var t=this;t.loading=!0,t.record.list_documents=[],axios.post("/purchase/get-process-documents",{id:t.record.id}).then(function(s){t.listSelectDocuments=s.data.records,t.record.list_documents=[],null!==s.data.selected&&(t.record.list_documents=JSON.parse(s.data.selected)),t.loading=!1}).catch(function(t){console.log(t)})},showListDocuments:function(t){var s=this;if(s.records.purchase_process){"string"==typeof s.records.purchase_process.list_documents&&(s.records.purchase_process.list_documents=JSON.parse(s.records.purchase_process.list_documents));var e=s.records.purchase_process.list_documents;for(var a in e)if(e[a]==t)return!0;return!1}},uploadFile:function(t){var s=this;if(document.querySelector("#".concat(t))){s.loading=!1,s.files[t]=document.querySelector("#".concat(t)).files[0];var e=new FormData,a=document.querySelector("#"+t);e.append("file",a.files[0]),e.append("purchase_plan_id",s.id),axios.post("/purchase/purchase_plan_upload_file",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){s.showMessage("update"),s.loading=!1,$("#status_"+t).show("slow")}).catch(function(t){if(void 0!==t.response&&(422==t.response.status||500==t.response.status))for(var e in t.response.data.errors)s.showMessage("custom","Error","danger","screen-error",t.response.data.errors[e][0]);s.loading=!1})}}},computed:{purchase_type:function(){if(this.records.purchase_type)return this.records.purchase_type.name},purchase_process:function(){if(this.records.purchase_process)return this.records.purchase_process.name}}},o=e("KHd+"),i=Object(o.a)(a,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("button",{staticClass:"btn btn-info btn-xs btn-icon btn-action",attrs:{title:"Visualizar registro","data-toggle":"tooltip"},on:{click:function(s){return t.addRecord("show_purchase_plan_"+t.id,t.route_show,s)}}},[e("i",{staticClass:"fa fa-eye"})]),t._v(" "),e("div",{staticClass:"modal fade text-left",attrs:{tabindex:"-1",role:"dialog",id:"show_purchase_plan_"+t.id}},[e("div",{staticClass:"modal-dialog vue-crud",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[e("hr"),t._v(" "),e("h6",[t._v("INFORMACIÓN DEL PLAN DE COMPRA")]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("strong",[t._v("Fecha de inicio:")]),t._v(" "+t._s(t.format_date(t.records.init_date)))]),t._v(" "),e("div",{staticClass:"col-3"},[e("strong",[t._v("Fecha de culminación:")]),t._v(" "+t._s(t.format_date(t.records.end_date)))]),t._v(" "),e("div",{staticClass:"col-3"},[e("strong",[t._v("Tipo de compra:")]),t._v(" "+t._s(t.purchase_type))]),t._v(" "),e("div",{staticClass:"col-3"},[e("strong",[t._v("Proceso de compra:")]),t._v(" "+t._s(t.purchase_process))]),t._v(" "),t._m(1)]),t._v(" "),e("hr"),t._v(" "),e("h6",{staticClass:"text-center text-info"},[t._v("DOCUMENTOS A CONSIGNAR")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},t._l(t.listSelectDocuments,function(s,a){return e("div",{staticClass:"accordion",attrs:{id:"documentsList"}},[e("h6",{staticClass:"mb-0",staticStyle:{"text-transform":"uppercase","font-weight":"bold"}},[e("button",{staticClass:"btn btn-link",attrs:{type:"button","data-toggle":"collapse",rel:"tooltip","data-target":"#collapseDocumentsList"+a,"aria-expanded":"true","aria-controls":"collapseDocumentsList"+a,title:"Presione para mostrar u ocultar la lista de documentos"}},[t._v("\n                                        "+t._s(a+1)+". "+t._s(s.title)+" \n                                    ")])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"collapse",class:{show:0===a},attrs:{id:"collapseDocumentsList"+a,"aria-labelledby":"heading"+a,"data-parent":"#documentsList"}},[e("div",{staticClass:"card-body"},[e("ul",{staticClass:"feature-list list-group list-group-flush"},t._l(s.documents,function(s,o){return t.showListDocuments(a+1+"_"+o)?e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"feature-list-indicator bg-info"}),t._v(" "),e("div",{staticClass:"feature-list-content p-0"},[e("div",{staticClass:"feature-list-content-wrapper"},[e("div",{staticClass:"feature-list-content-left mr-2"},[e("label",{staticClass:"custom-control"},[e("button",{staticClass:"btn btn-sm btn-info btn-import",attrs:{type:"button","data-toggle":"tooltip",title:"Presione para subir el archivo del documento."},on:{click:function(s){t.setFile("file_document_"+(a+1)+"_"+o)}}},[e("i",{staticClass:"fa fa-upload"})]),t._v(" "),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file_document_"+(a+1)+"_"+o},on:{change:function(s){t.uploadFile("file_document_"+(a+1)+"_"+o)}}})])]),t._v(" "),e("div",{staticClass:"feature-list-content-left"},[e("div",{staticClass:"feature-list-subheading"},[t._v("\n                                                                "+t._s(s)+"\n                                                            ")]),t._v(" "),e("div",{staticClass:"feature-list-subheading",staticStyle:{display:"none"},attrs:{id:"status_file_document_"+(a+1)+"_"+o}},[t._m(2,!0)])])])])]):t._e()}),0)])])])}),0)])])])])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"reset","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),s("h6",[s("i",{staticClass:"fa fa-list inline-block"}),this._v("\n                        Plan de compra\n                    ")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"col-3"},[s("strong",[this._v("Responsable:")]),this._v(" Empleado de nomina ")])},function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"badge badge-success"},[s("strong",[this._v("Documento Cargado.")])])}],!1,null,null,null);s.default=i.exports}}]);