(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"KHd+":function(t,e,r){"use strict";function o(t,e,r,o,i,s,a,n){var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=r,d._compiled=!0),o&&(d.functional=!0),s&&(d._scopeId="data-v-"+s),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},d._ssrRegister=c):i&&(c=n?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(d.functional){d._injectStyles=c;var u=d.render;d.render=function(t,e){return c.call(e),u(t,e)}}else{var _=d.beforeCreate;d.beforeCreate=_?[].concat(_,c):[c]}return{exports:t,options:d}}r.d(e,"a",function(){return o})},nwEy:function(t,e,r){"use strict";r.r(e);var o={data:function(){return{record:{id:"",budget_project_id:"",budget_centralized_action_id:"",budget_specific_action_id:"",type_search:"",department_id:"",institution_id:"",mes_id:"",year:"",start_date:"",end_date:""},records:[],errors:[],columns:["code","description","inventory"],budget_projects:[],budget_centralized_actions:[],budget_specific_actions:[],mes:[{id:"",text:"Todos"},{id:1,text:"Enero"},{id:2,text:"Febrero"},{id:3,text:"Marzo"},{id:4,text:"Abril"},{id:5,text:"Mayo"},{id:6,text:"Junio"},{id:7,text:"Julio"},{id:8,text:"Agosto"},{id:9,text:"Septiempre"},{id:10,text:"Octubre"},{id:11,text:"Noviembre"},{id:12,text:"Diciembre"}],institutions:[],departments:[]}},methods:{reset:function(){this.record={id:"",budget_project_id:"",budget_centralized_action_id:"",budget_specific_action_id:"",type_search:"",department_id:"",institution_id:"",mes_id:"",year:"",start_date:"",end_date:""}},createReport:function(t){var e=this;e.loading=!0;var r={};for(var o in this.record)r[o]=this.record[o];r.current=t,axios.post("/warehouse/reports/inventory-products/create",r).then(function(t){0==t.data.result?location.href=t.data.redirect:void 0!==t.data.redirect?window.open(t.data.redirect,"_blank"):e.reset(),e.loading=!1}).catch(function(t){void 0!==t.response&&console.log("error"),e.loading=!1})},loadInventoryProduct:function(t){var e=this;e.loading=!0;var r={};for(var o in this.record)r[o]=this.record[o];r.current=t,axios.post("/warehouse/reports/inventory-products/vue-list",r).then(function(t){void 0!==t.data.records&&(e.records=t.data.records),e.loading=!1}).catch(function(t){void 0!==t.response&&console.log("error"),e.loading=!1})}},created:function(){this.table_options.headings={code:"Código",description:"Descripción",inventory:"Inventario"},this.table_options.sortable=["code","description","inventory"],this.table_options.filterable=["code","description","inventory"]},watch:{budget_specific_actions:function(){$("#budget_specific_action_id").attr("disabled",this.budget_specific_actions.length<=1)}},mounted:function(){this.switchHandler("type_search"),this.getInstitutions(),this.getBudgetProjects(),this.getBudgetCentralizedActions(),this.loadInventoryProduct("request-products"),$(".sel_pry_acc").on("switchChange.bootstrapSwitch",function(t){$("#budget_project_id").attr("disabled","sel_project"!==t.target.id),$("#budget_centralized_action_id").attr("disabled","sel_centralized_action"!==t.target.id),"sel_project"===t.target.id?($("#budget_centralized_action_id").closest(".form-group").removeClass("is-required"),$("#budget_project_id").closest(".form-group").addClass("is-required")):"sel_centralized_action"===t.target.id&&($("#budget_centralized_action_id").closest(".form-group").addClass("is-required"),$("#budget_project_id").closest(".form-group").removeClass("is-required"))})}},i=r("KHd+"),s=Object(i.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{attrs:{id:"WarehouseReportForm"}},[r("div",{staticClass:"card-body"},[t.errors.length>0?r("div",{staticClass:"alert alert-danger"},[r("ul",t._l(t.errors,function(e){return r("li",[t._v(t._s(e))])}),0)]):t._e(),t._v(" "),r("div",{staticClass:"row"},[t._m(0),t._v(" "),r("div",{staticClass:"col-md-6",attrs:{id:"helpWarehouseRequestProject"}},[r("div",{staticClass:" form-group is-required"},[t._m(1),t._v(" "),r("select2",{attrs:{options:t.budget_projects,id:"budget_project_id",disabled:""},on:{input:function(e){return t.getBudgetSpecificActions("Project")}},model:{value:t.record.budget_project_id,callback:function(e){t.$set(t.record,"budget_project_id",e)},expression:"record.budget_project_id"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-6",attrs:{id:"helpWarehouseRequestCentralizedAction"}},[r("div",{staticClass:" form-group is-required"},[t._m(2),t._v(" "),r("select2",{attrs:{options:t.budget_centralized_actions,id:"budget_centralized_action_id",disabled:""},on:{input:function(e){return t.getBudgetSpecificActions("CentralizedAction")}},model:{value:t.record.budget_centralized_action_id,callback:function(e){t.$set(t.record,"budget_centralized_action_id",e)},expression:"record.budget_centralized_action_id"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-12",attrs:{id:"helpWarehouseRequestSpecificAction"}},[r("div",{staticClass:" form-group is-required"},[r("label",[t._v("Acción Específica")]),t._v(" "),r("select2",{attrs:{options:t.budget_specific_actions,id:"budget_specific_action_id",disabled:""},model:{value:t.record.budget_specific_action_id,callback:function(e){t.$set(t.record,"budget_specific_action_id",e)},expression:"record.budget_specific_action_id"}})],1)])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Institución:")]),t._v(" "),r("select2",{attrs:{options:t.institutions},on:{input:function(e){return t.getDepartments()}},model:{value:t.record.institution_id,callback:function(e){t.$set(t.record,"institution_id",e)},expression:"record.institution_id"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Departamento/Dependencia:")]),t._v(" "),r("select2",{attrs:{options:t.departments},model:{value:t.record.department_id,callback:function(e){t.$set(t.record,"department_id",e)},expression:"record.department_id"}})],1)])]),t._v(" "),t._m(3),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"mes"==this.record.type_search,expression:"this.record.type_search == 'mes'"}]},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Mes:")]),t._v(" "),r("select2",{attrs:{options:t.mes},model:{value:t.record.mes_id,callback:function(e){t.$set(t.record,"mes_id",e)},expression:"record.mes_id"}})],1)]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Año:")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.year,expression:"record.year"}],staticClass:"form-control input-sm",attrs:{type:"number","data-toggle":"tooltip",min:"0",title:"Indique el año de busqueda"},domProps:{value:t.record.year},on:{input:function(e){e.target.composing||t.$set(t.record,"year",e.target.value)}}})])])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"date"==this.record.type_search,expression:"this.record.type_search == 'date'"}]},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Desde:")]),t._v(" "),r("div",{staticClass:"input-group input-sm"},[t._m(4),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.start_date,expression:"record.start_date"}],staticClass:"form-control input-sm",attrs:{type:"date","data-toggle":"tooltip",title:"Indique la fecha minima de busqueda"},domProps:{value:t.record.start_date},on:{input:function(e){e.target.composing||t.$set(t.record,"start_date",e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("label",[t._v("Hasta:")]),t._v(" "),r("div",{staticClass:"input-group input-sm"},[t._m(5),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.record.end_date,expression:"record.end_date"}],staticClass:"form-control input-sm",attrs:{type:"date","data-toggle":"tooltip",title:"Indique la fecha maxima de busqueda"},domProps:{value:t.record.end_date},on:{input:function(e){e.target.composing||t.$set(t.record,"end_date",e.target.value)}}})])])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("button",{staticClass:"btn btn-sm btn-info float-right",attrs:{type:"button",title:"Buscar registro","data-toggle":"tooltip"},on:{click:function(e){return t.loadInventoryProduct("request-products")}}},[r("i",{staticClass:"fa fa-search"})])])]),t._v(" "),r("hr"),t._v(" "),r("v-client-table",{attrs:{columns:t.columns,data:t.records,options:t.table_options},scopedSlots:t._u([{key:"code",fn:function(e){return r("div",{},[r("span",[t._v("\n                    "+t._s(e.row.warehouse_inventory_product?e.row.warehouse_inventory_product.code:"")+"\n                ")])])}},{key:"description",fn:function(e){return r("div",{},[r("span",[r("b",[t._v(" "+t._s(e.row.warehouse_inventory_product&&e.row.warehouse_inventory_product.warehouse_product?"Nombre: ":"")+" ")]),t._v("\n                    "+t._s(e.row.warehouse_inventory_product&&e.row.warehouse_inventory_product.warehouse_product?e.row.warehouse_inventory_product.warehouse_product.name+".":"")+" "),r("br"),t._v("\n                    "+t._s(e.row.warehouse_inventory_product&&e.row.warehouse_inventory_product.warehouse_product?e.row.warehouse_inventory_product.warehouse_product.description:"")+" "),r("br")]),t._v(" "),r("span",[t._l(e.row.warehouse_inventory_product.warehouse_product_values,function(e){return r("div",[r("b",[t._v(t._s(e.warehouse_product_attribute.name+": "))]),t._v(" "+t._s(e.value)+" "),r("br")])}),t._v(" "),r("b",[t._v("Valor:")]),t._v(" "+t._s(e.row.warehouse_inventory_product.unit_value)+"\n                        "+t._s(e.row.warehouse_inventory_product&&e.row.warehouse_inventory_product.currency?e.row.warehouse_inventory_product.currency.acronym:"")+"\n                ")],2)])}},{key:"inventory",fn:function(e){return r("div",{},[r("span",[r("b",[t._v("Almacén:")]),t._v("\n                        "+t._s(e.row.warehouse_inventory_product&&e.row.warehouse_inventory_product.warehouse_institution_warehouse&&e.row.warehouse_inventory_product.warehouse_institution_warehouse.warehouse?e.row.warehouse_inventory_product.warehouse_institution_warehouse.warehouse.name:"")+" "),r("br"),t._v(" "),r("b",[t._v("Existencia:")]),t._v("\n                        "+t._s(e.row.warehouse_inventory_product?e.row.warehouse_inventory_product.exist:"")+" "),r("br"),t._v(" "),r("b",[t._v("Reservados:")]),t._v(" "+t._s(null===e.row.warehouse_inventory_product.reserved?"0":e.row.warehouse_inventory_product.reserved)+"\n                ")])])}}])})],1),t._v(" "),r("div",{staticClass:"card-footer text-right"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3 offset-md-9",attrs:{id:"helpParamButtons"}},[r("button",{staticClass:"btn btn-sm btn-primary btn-custom",attrs:{type:"button"},on:{click:function(e){return t.createReport("request-products")}}},[r("i",{staticClass:"fa fa-file-pdf-o"}),t._v(" "),r("span",[t._v("Generar Reporte")])])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12"},[e("strong",[this._v("Filtros")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"mb-4"},[e("div",{staticClass:"bootstrap-switch-mini"},[e("input",{staticClass:"form-control bootstrap-switch bootstrap-switch-mini sel_pry_acc",attrs:{type:"radio",name:"project_centralized_action",value:"project",id:"sel_project","data-on-label":"SI","data-off-label":"NO"}}),this._v("\n                            Proyecto\n                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"mb-4"},[e("div",{staticClass:"bootstrap-switch-mini"},[e("input",{staticClass:"form-control bootstrap-switch bootstrap-switch-mini sel_pry_acc",attrs:{type:"radio",name:"project_centralized_action",value:"project",id:"sel_centralized_action","data-on-label":"SI","data-off-label":"NO"}}),this._v("\n                            Acción Centralizada\n                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row text-center"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",[this._v("Busqueda por Periodo")]),this._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"col-12 bootstrap-switch-mini"},[e("input",{staticClass:"form-control bootstrap-switch bootstrap-switch-mini sel_type_search",attrs:{type:"radio",name:"type_search",value:"date",id:"sel_search_date","data-on-label":"SI","data-off-label":"NO"}})])])])]),this._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:" form-group"},[e("label",[this._v("Busqueda por Mes")]),this._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"col-12 bootstrap-switch-mini"},[e("input",{staticClass:"form-control bootstrap-switch bootstrap-switch-mini sel_type_search",attrs:{type:"radio",name:"type_search",value:"mes",id:"sel_search_mes","data-on-label":"SI","data-off-label":"NO"}})])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-addon"},[e("i",{staticClass:"now-ui-icons ui-1_calendar-60"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-addon"},[e("i",{staticClass:"now-ui-icons ui-1_calendar-60"})])}],!1,null,null,null);e.default=s.exports}}]);