(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"KHd+":function(t,e,s){"use strict";function i(t,e,s,i,o,r,n,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=s,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),n?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}s.d(e,"a",function(){return i})},uy2g:function(t,e,s){"use strict";s.r(e);var i={data:function(){return{record:{id:"",minimum:"",maximum:"",warehouse_inventory_product_id:""},editIndex:null,institution_id:"",warehouse_id:"",warehouses:[],institutions:[],errors:[],records:[],columns:["code","description","details","inventory","rules","id"]}},methods:{reset:function(){this.record={id:"",minimum:"",maximum:"",warehouse_inventory_product_id:""},this.editIndex=null,this.institution_id="",this.warehouse_id=""},getWarehouseProducts:function(){var t=this;if(""!=t.warehouse_id&&""!=t.institution_id){axios.get("/warehouse/rules/vue-list-products/"+t.warehouse_id+"/"+t.institution_id).then(function(e){void 0!==e.data.records?t.records=e.data.records:t.records=[]})}else axios.get("/warehouse/rules/vue-list-products").then(function(e){void 0!==e.data.records?t.records=e.data.records:t.records=[]})},editRule:function(t,e){this.editIndex=t-1,null==this.records[t-1].warehouse_inventory_rule?this.record={id:"",minimum:"",maximum:"",warehouse_inventory_product_id:this.records[t-1].id}:this.record=this.records[t-1].warehouse_inventory_rule,e.preventDefault()},deleteRecord:function(t,e){e=e||this.route_delete;var s=this.records,i=(t=t-1,this);bootbox.confirm({title:"Eliminar registro?",message:"Esta seguro de eliminar este registro?",buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancelar'},confirm:{label:'<i class="fa fa-check"></i> Confirmar'}},callback:function(o){o&&(!0,axios.delete(e+"/"+s[t].id).then(function(t){if(void 0!==t.data.error)return i.showMessage("custom","Alerta!","warning","screen-error",t.data.message),!1;i.readRecords("warehouse/rules"),i.showMessage("destroy")}).catch(function(t){}))}})}},created:function(){this.getInstitutions(),this.table_options.headings={code:"Código",description:"Descripción",details:"Detalles",inventory:"Inventario",rules:"Reglas",id:"Acción"},this.table_options.sortable=["code","description","details","inventory","rules"],this.table_options.filterable=["code","description","details","inventory","rules"],this.table_options.columnsClasses={code:"col-xs-2",description:"col-xs-2",details:"col-xs-2",inventory:"col-xs-2",rules:"col-xs-2",id:"col-xs-2"}},mounted:function(){this.getWarehouseProducts()}},o=s("KHd+"),r=Object(o.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-xs-2 text-center"},[s("a",{staticClass:"btn-simplex btn-simplex-md btn-simplex-primary",attrs:{href:"#",title:"Reglas de Abastecimiento del Almacén","data-toggle":"tooltip"},on:{click:function(e){return t.addRecord("add_rule","rules",e)}}},[s("i",{staticClass:"icofont icofont-law-document ico-3x"}),t._v(" "),s("span",[t._v("Reglas de Abastecimiento")])]),t._v(" "),s("div",{staticClass:"modal fade text-left",attrs:{tabindex:"-1",role:"dialog",id:"add_rule"}},[s("div",{staticClass:"modal-dialog vue-crud",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body"},[t.errors.length>0?s("div",{staticClass:"alert alert-danger"},[s("div",{staticClass:"container"},[t._m(1),t._v(" "),s("strong",[t._v("Cuidado!")]),t._v(" Debe verificar los siguientes errores antes de continuar:\n\t\t\t\t\t\t\t\t"),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(e){e.preventDefault(),t.errors=[]}}},[t._m(2)]),t._v(" "),s("ul",t._l(t.errors,function(e){return s("li",[t._v(t._s(e))])}),0)])]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Institución que gestiona el Almacén:")]),t._v(" "),s("select2",{attrs:{options:t.institutions},on:{input:function(e){return t.getWarehouses()}},model:{value:t.institution_id,callback:function(e){t.institution_id=e},expression:"institution_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Almacén:")]),t._v(" "),s("select2",{attrs:{options:t.warehouses},on:{input:function(e){return t.getWarehouseProducts()}},model:{value:t.warehouse_id,callback:function(e){t.warehouse_id=e},expression:"warehouse_id"}})],1)])]),t._v(" "),s("hr"),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""!=this.record.warehouse_inventory_product_id,expression:"this.record.warehouse_inventory_product_id != ''"}],staticClass:"row"},[s("div",{staticClass:"col-md-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Minimo:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.record.minimum,expression:"record.minimum"}],staticClass:"form-control input-sm",attrs:{type:"number","data-toggle":"tooltip",min:"0"},domProps:{value:t.record.minimum},on:{input:function(e){e.target.composing||t.$set(t.record,"minimum",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-3"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Maximo:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.record.maximum,expression:"record.maximum"}],staticClass:"form-control input-sm",attrs:{type:"number","data-toggle":"tooltip",min:"0"},domProps:{value:t.record.maximum},on:{input:function(e){e.target.composing||t.$set(t.record,"maximum",e.target.value)}}})])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"form-group"},[s("modal-form-buttons",{attrs:{saveRoute:"warehouse/rules"}})],1)]),t._v(" "),s("div",{staticClass:"modal-body modal-table"},[s("hr"),t._v(" "),s("v-client-table",{attrs:{columns:t.columns,data:t.records,options:t.table_options},scopedSlots:t._u([{key:"description",fn:function(e){return s("div",{},[s("span",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.row.warehouse_product?e.row.warehouse_product.name+": "+e.row.warehouse_product.description:"N/A")+"\n\t\t\t\t\t\t\t\t")])])}},{key:"inventory",fn:function(e){return s("div",{},[s("span",[s("b",[t._v("Almacén:")]),t._v(" "+t._s(e.row.warehouse_institution_warehouse.warehouse.name)+" "),s("br"),t._v(" "),s("b",[t._v("Existencia:")]),t._v(" "+t._s(e.row.exist)),s("br"),t._v(" "),s("b",[t._v("Reservados:")]),t._v(" "+t._s(null===e.row.reserved?"0":e.row.reserved)+"\n\t\t\t\t\t\t\t\t")])])}},{key:"rules",fn:function(e){return s("div",{},[s("span",[s("b",[t._v("Minimo:")]),t._v(" "+t._s(e.row.warehouse_inventory_rule?e.row.warehouse_inventory_rule.minimum:"N/A")+" "),s("br"),t._v(" "),s("b",[t._v("Maximo:")]),t._v(" "+t._s(e.row.warehouse_inventory_rule?e.row.warehouse_inventory_rule.maximum:"N/A")+"\n\t\t\t\t\t\t\t\t")])])}},{key:"details",fn:function(e){return s("div",{},[s("span",[t._l(e.row.warehouse_product_values,function(e){return s("div",[s("b",[t._v(t._s(e.warehouse_product_attribute.name+":"))]),t._v(" "+t._s(e.value)+"\n\t\t\t\t\t\t\t\t\t")])}),t._v(" "),s("b",[t._v("Valor:")]),t._v(" "+t._s(e.row.unit_value)+" "+t._s(e.row.currency?e.row.currency.name:"")+"\n\t\t\t\t\t\t\t\t")],2)])}},{key:"id",fn:function(e){return s("div",{staticClass:"text-center"},[s("div",{staticClass:"d-inline-flex"},[s("button",{staticClass:"btn btn-warning btn-xs btn-icon btn-action",attrs:{title:"Modificar registro","data-toggle":"tooltip",type:"button"},on:{click:function(s){return t.editRule(e.index,s)}}},[s("i",{staticClass:"fa fa-edit"})]),t._v(" "),s("button",{staticClass:"btn btn-danger btn-xs btn-icon btn-action",attrs:{title:"Eliminar registro","data-toggle":"tooltip",type:"button"},on:{click:function(s){return t.deleteRecord(e.index,"rules")}}},[s("i",{staticClass:"fa fa-trash-o"})])])])}}])})],1)])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),e("h6",[e("i",{staticClass:"icofont icofont-law-document ico-2x"}),this._v("\n\t\t\t\t\t\t\tReglas de Abastecimiento del Almacén\n\t\t\t\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert-icon"},[e("i",{staticClass:"now-ui-icons objects_support-17"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"now-ui-icons ui-1_simple-remove"})])}],!1,null,null,null);e.default=r.exports}}]);