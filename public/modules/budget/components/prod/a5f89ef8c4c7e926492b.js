(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{BdZt:function(t,a,s){"use strict";s.r(a);var e={data:function(){return{record:{id:"",institution_id:"",compromised_at:"",source_document:"",description:"",accounts:[],tax_accounts:[]},errors:[],institutions:[],taxes:[],specific_actions:[],specific_action_id:"",accounts:[],account_id:"",account_description:"",account_concept:"",account_amount:0,account_tax_id:"",document_sources:[],document_number:""}},methods:{reset:function(){this.record.id="",this.record.institution_id="",this.record.compromised_at="",this.record.accounts=[],this.record.tax_accounts=[],this.source_document="",this.description="",this.errors=[],this.institutions=[],this.taxes=[],this.specific_actions=[],this.specific_action_id="",this.accounts=[],this.account_id="",this.account_description="",this.account_concept="",this.account_amount=0,this.account_tax_id="",this.document_sources=[],this.document_number=""},deleteAccount:function(t){var a=this;bootbox.confirm({title:"Eliminar cuenta?",message:"Esta seguro de eliminar esta cuenta del registro de la modificación\n                          presupuestaria?",buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancelar'},confirm:{label:'<i class="fa fa-check"></i> Confirmar'}},callback:function(s){s&&a.budget_modification_accounts.splice(t,1)}})},addAccount:function(){},addDocument:function(t){},getSpecificActions:function(){},getDocumentSources:function(){var t=this,a=window.app_url,s=t.record.institution_id,e=window.execution_year;t.loading=!0,axios.get("".concat(a,"/budget/compromises/get-document-sources/").concat(s,"/").concat(e)).then(function(a){t.document_sources=a.data.records,t.loading=!1}).catch(function(t){console.warn(t)})}},created:function(){},mounted:function(){var t=this;t.reset(),t.getInstitutions(),t.getSpecificActions(),$("#add_source").on("shown.bs.modal",function(){t.getDocumentSources()}).on("hide.bs.modal",function(){t.document_sources=[]})}},i=s("KHd+"),o=Object(i.a)(e,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"card-body"},[t.errors.length>0?s("div",{staticClass:"alert alert-danger"},[s("ul",t._l(t.errors,function(a){return s("li",[t._v(t._s(a))])}),0)]):t._e(),t._v(" "),s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group is-required"},[s("select2",{attrs:{options:t.institutions},model:{value:t.record.institution_id,callback:function(a){t.$set(t.record,"institution_id",a)},expression:"record.institution_id"}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.record.id,expression:"record.id"}],attrs:{type:"hidden"},domProps:{value:t.record.id},on:{input:function(a){a.target.composing||t.$set(t.record,"id",a.target.value)}}})],1)])]),t._v(" "),s("div",{staticClass:"row"},[t._m(1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group is-required"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.record.compromised_at,expression:"record.compromised_at"}],staticClass:"form-control input-sm",attrs:{type:"date",title:"Indique la fecha del compromiso",id:"compromised_at","data-toggle":"tooltip"},domProps:{value:t.record.compromised_at},on:{input:function(a){a.target.composing||t.$set(t.record,"compromised_at",a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-2"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label",attrs:{for:""}},[t._v("\n                        Documento Origen\n                        "),t.record.institution_id?s("a",{staticClass:"btn btn-sm btn-info btn-action btn-tooltip",attrs:{href:"javascript:void(0)","data-original-title":"Buscar documento",title:"Buscar documento","data-toggle":"modal","data-target":"#add_source"}},[s("i",{staticClass:"fa fa-search"})]):t._e(),t._v(" "),""!==t.document_number?s("a",{staticClass:"btn btn-sm btn-default btn-action btn-tooltip",attrs:{href:"javascript:void(0)","data-original-title":"Quitar documento de origen",title:"Quitar documento de origen","data-toggle":"tooltip"}},[s("i",{staticClass:"icofont icofont-eraser"})]):t._e()])])]),t._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group is-required"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.record.source_document,expression:"record.source_document"}],staticClass:"form-control input-sm",attrs:{type:"text",title:"Indique el número de documento de origen que genera el compromiso","data-toggle":"tooltip",readonly:""!==t.document_number},domProps:{value:t.record.source_document},on:{input:function(a){a.target.composing||t.$set(t.record,"source_document",a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"add_source"}},[s("div",{staticClass:"modal-dialog vue-crud",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 pad-top-20"},[s("table",{staticClass:"table table-hover table-striped"},[t._m(3),t._v(" "),s("tbody",t._l(t.document_sources,function(a,e){return s("tr",[s("td",[t._v(t._s(a.sourceable.code))]),t._v(" "),s("td",[t._v(t._s(t.format_date(a.created_at)))]),t._v(" "),s("td",[t._v(t._s(a.budget_stages[0].amount))]),t._v(" "),s("td",[s("a",{staticClass:"btn btn-sm btn-info btn-action btn-tooltip",attrs:{href:"#","data-original-title":"Agregar documento"},on:{click:function(s){return t.addDocument(a.id)}}},[s("i",{staticClass:"fa fa-plus-circle"})])])])}),0)])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-default btn-sm btn-round btn-modal-close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n                                Cerrar\n                            ")]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-sm btn-round btn-modal-save",attrs:{type:"button"},on:{click:t.addDocument}},[t._v("\n                                Agregar\n                            ")])])])])])]),t._v(" "),s("div",{staticClass:"row"},[t._m(4),t._v(" "),s("div",{staticClass:"col-md-10"},[s("div",{staticClass:"form-group is-required"},[s("ckeditor",{staticClass:"form-control",attrs:{editor:t.ckeditor.editor,id:"description","data-toggle":"tooltip",title:"Indique una descripción para el compromiso",config:t.ckeditor.editorConfig,name:"description","tag-name":"textarea",rows:"3"},model:{value:t.record.description,callback:function(a){t.$set(t.record,"description",a)},expression:"record.description"}})],1)])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"pad-top-40"},[s("h6",{staticClass:"text-center card-title"},[t._v("Cuentas presupuestarias de gastos")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 pad-top-20"},[s("table",{staticClass:"table table-hover table-striped"},[t._m(5),t._v(" "),s("tbody",t._l(t.record.accounts,function(a,e){return s("tr",[s("td",[t._v(t._s(a.spac_description))]),t._v(" "),s("td",[t._v(t._s(a.code))]),t._v(" "),s("td",[t._v(t._s(a.description))]),t._v(" "),s("td",{staticClass:"text-right"},[t._v(t._s(a.amount))]),t._v(" "),s("td",{staticClass:"text-center"},[s("input",{attrs:{type:"hidden",name:"account_id[]",readonly:""},domProps:{value:a.specific_action_id+"|"+a.account_id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"budget_account_amount[]",readonly:""},domProps:{value:a.amount}}),t._v(" "),s("a",{staticClass:"btn btn-sm btn-danger btn-action",attrs:{href:"#",title:"Eliminar este registro","data-toggle":"tooltip"},on:{click:function(a){return t.deleteAccount(e)}}},[s("i",{staticClass:"fa fa-minus-circle"})])])])}),0)])])])]),t._v(" "),s("div",{staticClass:"pad-top-40"},[s("h6",{staticClass:"text-center card-title"},[t._v("Cuentas presupuestarias de impuestos")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 pad-top-20"},[s("table",{staticClass:"table table-hover table-striped"},[t._m(6),t._v(" "),s("tbody",t._l(t.record.tax_accounts,function(a,e){return s("tr",{attrs:{id:a.parent_account_id}},[s("td",[t._v(t._s(a.spac_description))]),t._v(" "),s("td",[t._v(t._s(a.code))]),t._v(" "),s("td",[t._v(t._s(a.description))]),t._v(" "),s("td",{staticClass:"text-right"},[t._v(t._s(a.amount))]),t._v(" "),s("td",{staticClass:"text-center"},[s("input",{attrs:{type:"hidden",name:"account_id[]",readonly:""},domProps:{value:a.specific_action_id+"|"+a.account_id}}),t._v(" "),s("input",{attrs:{type:"hidden",name:"budget_tax_account_amount[]",readonly:""},domProps:{value:a.amount}})])])}),0)])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"add_account"}},[s("div",{staticClass:"modal-dialog vue-crud",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(7),t._v(" "),s("div",{staticClass:"modal-body"},[t.errors.length>0?s("div",{staticClass:"alert alert-danger"},[s("ul",t._l(t.errors,function(a){return s("li",[t._v(t._s(a))])}),0)]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group is-required"},[s("label",[t._v("Acción Específica:")]),t._v(" "),s("select2",{attrs:{options:t.specific_actions},model:{value:t.specific_action_id,callback:function(a){t.specific_action_id=a},expression:"specific_action_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group is-required"},[s("label",[t._v("Cuenta:")]),t._v(" "),s("select2",{attrs:{options:t.accounts},model:{value:t.account_id,callback:function(a){t.account_id=a},expression:"account_id"}})],1)])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("label",[t._v("Descripción:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account_description,expression:"account_description"}],staticClass:"form-control input-sm",attrs:{type:"text","data-toggle":"tooltip",readonly:"",title:"Denominación de la cuenta presupuestaria"},domProps:{value:t.account_description},on:{input:function(a){a.target.composing||(t.account_description=a.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("label",[t._v("Concepto:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account_concept,expression:"account_concept"}],staticClass:"form-control input-sm",attrs:{type:"text","data-toggle":"tooltip",title:"Indique el concepto de la cuenta presupuestaria a agregar"},domProps:{value:t.account_concept},on:{input:function(a){a.target.composing||(t.account_concept=a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3 mt-4"},[s("div",{staticClass:"form-group is-required"},[s("label",[t._v("Monto:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account_amount,expression:"account_amount"}],staticClass:"form-control input-sm",attrs:{type:"number",onfocus:"$(this).select()","data-toggle":"tooltip",title:"Indique el monto a asignar para la cuenta seleccionada"},domProps:{value:t.account_amount},on:{input:function(a){a.target.composing||(t.account_amount=a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-3 mt-4"},[s("div",{staticClass:"form-group is-required"},[s("label",[t._v("Impuesto:")]),t._v(" "),s("select2",{attrs:{options:t.taxes},model:{value:t.account_tax_id,callback:function(a){t.account_tax_id=a},expression:"account_tax_id"}})],1)])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-default btn-sm btn-round btn-modal-close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n                                Cerrar\n                            ")]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-sm btn-round btn-modal-save",attrs:{type:"button"},on:{click:t.addAccount}},[t._v("\n                                Agregar\n                            ")])])])])])])]),t._v(" "),s("div",{staticClass:"card-footer text-right"},[s("button",{staticClass:"btn btn-default btn-icon btn-round",attrs:{type:"reset","data-toggle":"tooltip",title:"Borrar datos del formulario"},on:{click:t.reset}},[s("i",{staticClass:"fa fa-eraser"})]),t._v(" "),s("button",{staticClass:"btn btn-warning btn-icon btn-round",attrs:{type:"button","data-toggle":"tooltip",title:"Cancelar y regresar"},on:{click:function(a){return t.redirect_back(t.route_list)}}},[s("i",{staticClass:"fa fa-ban"})]),t._v(" "),s("button",{staticClass:"btn btn-success btn-icon btn-round",attrs:{type:"button","data-toggle":"tooltip",title:"Guardar registro"},on:{click:function(a){return t.createRecord("budget/compromises")}}},[s("i",{staticClass:"fa fa-save"})])])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:""}},[this._v("Institución")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:""}},[this._v("Fecha")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),a("h6",[a("i",{staticClass:"ion-arrow-graph-up-right"}),this._v("\n                                Agregar documento\n                            ")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Código")]),this._v(" "),a("th",[this._v("Fecha")]),this._v(" "),a("th",[this._v("Monto")]),this._v(" "),a("th",[this._v("Sel.")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",attrs:{for:""}},[this._v("Descripción")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("Acción Específica")]),t._v(" "),s("th",[t._v("Cuenta")]),t._v(" "),s("th",[t._v("Descripción")]),t._v(" "),s("th",[t._v("Monto")]),t._v(" "),s("th",[s("a",{staticClass:"btn btn-sm btn-info btn-action btn-tooltip",attrs:{href:"#","data-original-title":"Agregar cuenta presupuestaria","data-toggle":"modal","data-target":"#add_account"}},[s("i",{staticClass:"fa fa-plus-circle"})])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("Acción Específica")]),t._v(" "),s("th",[t._v("Cuenta")]),t._v(" "),s("th",[t._v("Descripción")]),t._v(" "),s("th",[t._v("Monto")]),t._v(" "),s("th")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),a("h6",[a("i",{staticClass:"ion-arrow-graph-up-right"}),this._v("\n                                Agregar cuentas\n                            ")])])}],!1,null,null,null);a.default=o.exports},"KHd+":function(t,a,s){"use strict";function e(t,a,s,e,i,o,c,n){var r,d="function"==typeof t?t.options:t;if(a&&(d.render=a,d.staticRenderFns=s,d._compiled=!0),e&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),c?(r=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},d._ssrRegister=r):i&&(r=n?function(){i.call(this,this.$root.$options.shadowRoot)}:i),r)if(d.functional){d._injectStyles=r;var l=d.render;d.render=function(t,a){return r.call(a),l(t,a)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,r):[r]}return{exports:t,options:d}}s.d(a,"a",function(){return e})}}]);