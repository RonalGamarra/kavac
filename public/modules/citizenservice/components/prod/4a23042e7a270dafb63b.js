(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"KHd+":function(e,t,s){"use strict";function i(e,t,s,i,r,a,o,c){var n,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=s,d._compiled=!0),i&&(d.functional=!0),a&&(d._scopeId="data-v-"+a),o?(n=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=n):r&&(n=c?function(){r.call(this,this.$root.$options.shadowRoot)}:r),n)if(d.functional){d._injectStyles=n;var l=d.render;d.render=function(e,t){return n.call(t),l(e,t)}}else{var _=d.beforeCreate;d.beforeCreate=_?[].concat(_,n):[n]}return{exports:e,options:d}}s.d(t,"a",(function(){return i}))},wYxm:function(e,t,s){"use strict";s.r(t);var i={data:function(){return{record:{id:"",citizen_service_request_types_id:"",citizen_service_id:"",type_search:"",date:"",start_date:"",end_date:""},records:[],errors:[],columns:["requested_by","citizen_service_request_type_id","state","date","id"],citizen_service_request_types:[],citizen_service_states:[{id:"",text:"Seleccione.."},{id:"Iniciado",text:"Iniciado"},{id:"Culminado",text:"Culminado"}]}},created:function(){this.table_options.headings={requested_by:"Solicitado por",citizen_service_request_type_id:"Tipos de solicitud",state:"Estado de la Solicitud",date:"Fecha de la Solicitud",id:"Acción"},this.table_options.sortable=["requested_by","citizen_service_request_type_id","state","date"],this.table_options.filterable=["requested_by","citizen_service_request_type_id","state","date"],this.getCitizenServiceRequestTypes()},mounted:function(){this.switchHandler("type_search")},methods:{reset:function(){this.record={id:"",citizen_service_request_types_id:"",citizen_service_id:"",type_search:"",date:"",start_date:"",end_date:""}},createReport:function(){var e=this,t={};if(""==e.record.type_search)return bootbox.alert("Seleccionar el tipo de reporte a generar"),!1;if("date"==e.record.type_search)return!1;for(var s in this.record)t[s]=this.record[s];axios.post("/citizenservice/reports",t).then((function(t){0==t.data.result?location.href=t.data.redirect:void 0!==t.data.redirect?window.open(t.data.redirect,"_blank"):e.reset()})).catch((function(t){if(e.errors=[],void 0!==t.response)for(var s in t.response.data.errors)t.response.data.errors[s]&&e.errors.push(t.response.data.errors[s][0])}))},filterRecords:function(){var e=this,t="/citizenservice/reports/search",s={};"period"==e.record.type_search?(t+="/period",s={start_date:e.record.start_date,end_date:e.record.end_date,citizen_service_request_type_id:e.record.citizen_service_request_type_id,citizen_service_id:e.record.citizen_service_id}):"date"==e.record.type_search&&(t+="/date",s={date:e.record.date,citizen_service_request_type_id:e.record.citizen_service_request_type_id,citizen_service_id:e.record.citizen_service_id}),""!=e.record.type_search&&axios.post(t,s).then((function(t){e.records=t.data.records}))}}},r=s("KHd+"),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h6",{staticClass:"card-title text-uppercase"},[e._v("Reportes")]),e._v(" "),s("div",{staticClass:"card-btns"},[s("a",{staticClass:"btn btn-sm btn-primary btn-custom",attrs:{href:"#",title:"Ir atrás","data-toggle":"tooltip"},on:{click:function(t){return e.redirect_back(e.route_list)}}},[s("i",{staticClass:"fa fa-reply"})]),e._v(" "),e._m(0)])]),e._v(" "),s("div",{staticClass:"card-body"},[e.errors.length>0?s("div",{staticClass:"alert alert-danger"},[s("ul",e._l(e.errors,(function(t){return s("li",[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group is-required"},[s("label",{attrs:{for:"citizenserviceRequestTypes"}},[e._v("Tipo de Solicitud")]),e._v(" "),s("select2",{attrs:{options:e.citizen_service_request_types},model:{value:e.record.citizen_service_request_type_id,callback:function(t){e.$set(e.record,"citizen_service_request_type_id",t)},expression:"record.citizen_service_request_type_id"}})],1)]),e._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group is-required"},[s("label",[e._v("Estado de la Solicitud:")]),e._v(" "),s("select2",{attrs:{options:e.citizen_service_states},model:{value:e.record.citizen_service_id,callback:function(t){e.$set(e.record,"citizen_service_id",t)},expression:"record.citizen_service_id"}})],1)])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group",staticStyle:{"text-align":"right"}},[s("label",[e._v("Busqueda por Periodo")]),e._v(" "),s("div",{staticClass:"col-12"},[e._m(1),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.record.type_search,expression:"record.type_search"}],attrs:{type:"hidden"},domProps:{value:e.record.type_search},on:{input:function(t){t.target.composing||e.$set(e.record,"type_search",t.target.value)}}})])])]),e._v(" "),e._m(2)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"period"==this.record.type_search,expression:"this.record.type_search == 'period'"}]},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 offset-2"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Desde:")]),e._v(" "),s("div",{staticClass:"input-group input-sm"},[e._m(3),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.record.start_date,expression:"record.start_date"}],staticClass:"form-control input-sm",attrs:{type:"date","data-toggle":"tooltip",title:"Indique la fecha minima de busqueda"},domProps:{value:e.record.start_date},on:{input:function(t){t.target.composing||e.$set(e.record,"start_date",t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Hasta:")]),e._v(" "),s("div",{staticClass:"input-group input-sm"},[e._m(4),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.record.end_date,expression:"record.end_date"}],staticClass:"form-control input-sm",attrs:{type:"date","data-toggle":"tooltip",title:"Indique la fecha maxima de busqueda"},domProps:{value:e.record.end_date},on:{input:function(t){t.target.composing||e.$set(e.record,"end_date",t.target.value)}}})])])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"date"==this.record.type_search,expression:"this.record.type_search == 'date'"}]},[s("div",{staticClass:"col-md-4 offset-2"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Fecha")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.record.date,expression:"record.date"}],staticClass:"form-control input-sm",attrs:{type:"date","data-toggle":"tooltip",title:"Indique la fecha de solicitud"},domProps:{value:e.record.date},on:{input:function(t){t.target.composing||e.$set(e.record,"date",t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("button",{directives:[{name:"show",rawName:"v-show",value:""!=this.record.type_search,expression:"this.record.type_search != ''"}],staticClass:"btn btn-sm btn-info btn-custom float-right",attrs:{type:"button","data-toggle":"tooltip",title:"Buscar registros"},on:{click:function(t){return e.filterRecords()}}},[s("i",{staticClass:"fa fa-search"})])])]),e._v(" "),s("hr"),e._v(" "),s("v-client-table",{attrs:{columns:e.columns,data:e.records,options:e.table_options},scopedSlots:e._u([{key:"code",fn:function(t){return s("div",{staticClass:"text-center"},[s("span",[e._v(e._s(t.row.code))])])}},{key:"id",fn:function(t){return s("div",{staticClass:"text-center"},[s("div",{staticClass:"d-inline-flex"},[s("button",{staticClass:"btn btn-primary btn-xs btn-icon btn-action",attrs:{title:"Generar reporte","data-toggle":"tooltip",type:"button"},on:{click:function(t){return e.createReport()}}},[s("i",{staticClass:"fa fa-file-pdf-o"})])])])}},{key:"requested_by",fn:function(t){return s("div",{staticClass:"text-center"},[s("span",[e._v(e._s(t.row.first_name+" "+t.row.last_name))])])}}])})],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"card-minimize btn btn-card-action btn-round",attrs:{href:"#",title:"Minimizar","data-toggle":"tooltip"}},[t("i",{staticClass:"now-ui-icons arrows-1_minimal-up"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-12 bootstrap-switch-mini"},[t("input",{staticClass:"form-control bootstrap-switch bootstrap-switch-mini sel_type_search",attrs:{type:"radio",name:"type_search",value:"period",id:"sel_search_period","data-on-label":"SI","data-off-label":"NO"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-6"},[t("div",{staticClass:" form-group"},[t("label",[this._v("Busqueda por Fecha ")]),this._v(" "),t("div",{staticClass:"col-12"},[t("div",{staticClass:"col-12 bootstrap-switch-mini"},[t("input",{staticClass:"form-control bootstrap-switch bootstrap-switch-mini sel_type_search",attrs:{type:"radio",name:"type_search",value:"date",id:"sel_search_date","data-on-label":"SI","data-off-label":"NO"}})])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"input-group-addon"},[t("i",{staticClass:"now-ui-icons ui-1_calendar-60"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"input-group-addon"},[t("i",{staticClass:"now-ui-icons ui-1_calendar-60"})])}],!1,null,null,null);t.default=a.exports}}]);